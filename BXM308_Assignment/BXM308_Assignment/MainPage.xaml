<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             xmlns:xct="http://xamarin.com/schemas/2020/toolkit"
             xmlns:local="clr-namespace:BXM308_Assignment.CustomView"
             xmlns:sho="http://sharpnado.com"
             xmlns:circle="clr-namespace:ImageCircle.Forms.Plugin.Abstractions;assembly=ImageCircle.Forms.Plugin"
             xmlns:converter="clr-namespace:BXM308_Assignment.Converter"        
             xmlns:ffimageloading="clr-namespace:FFImageLoading.Forms;assembly=FFImageLoading.Forms"
             xmlns:pancake="clr-namespace:Xamarin.Forms.PancakeView;assembly=Xamarin.Forms.PancakeView"
             xmlns:cv="clr-namespace:CarouselView.FormsPlugin.Abstractions;assembly=CarouselView.FormsPlugin.Abstractions"
             NavigationPage.HasNavigationBar="False" BackgroundColor="#080808"
             x:Class="BXM308_Assignment.MainPage">
    <ContentPage.Resources>
        <ResourceDictionary>
            <converter:TrueFalseConverter x:Key="TrueFalseConverter"></converter:TrueFalseConverter>
            <converter:MovieCollectionViewHeightConverter x:Key="MovieCollectionViewHeightConverter"></converter:MovieCollectionViewHeightConverter>

            <converter:TicketTextConverter x:Key="TicketTextConverter"></converter:TicketTextConverter>
            <converter:TicketBackgroundColorConverter x:Key="TicketBackgroundColorConverter"></converter:TicketBackgroundColorConverter>
            <converter:TicketLoadMoreVisible x:Key="TicketLoadMoreVisible"></converter:TicketLoadMoreVisible>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowSpacing="0" >
        <!--Home-->

        <Grid VerticalOptions="FillAndExpand" IsVisible="{Binding HomeContainerVisible}" >
            <ScrollView HorizontalScrollBarVisibility="Never" Padding="0,2,0,60" VerticalScrollBarVisibility="Never"    >


                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">

                    <Grid VerticalOptions="Start">

                        <cv:CarouselViewControl VerticalOptions="Start" 
                                    ShowArrows="True"
                                    ArrowsBackgroundColor="Transparent"
                                    ArrowsSize="30" ArrowsParentMargin="6"
                                    ArrowsTransparency="0.9" ArrowsTintColor="White"
                                    ItemsSource="{Binding MainPoster}"  
                                 HeightRequest="350" BackgroundColor="#060606"
                                 AutoplayInterval="6" InfiniteScrolling="True">
                            <cv:CarouselViewControl.ItemTemplate>
                                <DataTemplate>
                                    <ffimageloading:CachedImage Source="{Binding }" Aspect="AspectFit" />
                                </DataTemplate>
                            </cv:CarouselViewControl.ItemTemplate>
                        </cv:CarouselViewControl>

                        <BoxView  VerticalOptions="End" >
                            <BoxView.Background>
                                <LinearGradientBrush EndPoint="0,1">
                                    <GradientStop Color="Transparent"
                                                      Offset="0" />
                                    <GradientStop Color="#080808"
                                                      Offset="1.0" />
                                </LinearGradientBrush>
                            </BoxView.Background>
                        </BoxView>

                    </Grid>
                    <BoxView HeightRequest="20"  >
                        <BoxView.Background>
                            <LinearGradientBrush EndPoint="0,1">
                                <GradientStop Color="#080808"
                                                  Offset="0" />
                                <GradientStop Color="#202020"
                                                   Offset="0.5" />
                                <GradientStop Color="#080808"
                                                  Offset="1.0" />
                            </LinearGradientBrush>
                        </BoxView.Background>
                    </BoxView>
                    <!--Main Board Showing Movie-->
                    <FlexLayout  Direction="Row" JustifyContent="SpaceEvenly"
                                 VerticalOptions="Start"  Padding="16,10"
                             >
                        <Frame xct:ShadowEffect.Color="{Binding ShowingTextColor}"  BorderColor="{Binding ShowingBorderColor}" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6" BackgroundColor="#202020" Padding="16,10" CornerRadius="16">
                            <Label  xct:ShadowEffect.Color="{Binding ShowingTextColor}" TextColor="{Binding ShowingTextColor}"  xct:ShadowEffect.Radius="3" Text="Now Showing" Style="{StaticResource Size_Large}" FontFamily="{Binding ShowingFontFamily}" ></Label>
                            <Frame.GestureRecognizers >
                                <TapGestureRecognizer Tapped="Update_MainBoardMovie" CommandParameter="Showing"></TapGestureRecognizer>
                            </Frame.GestureRecognizers>
                        </Frame>
                        <Frame xct:ShadowEffect.Color="{Binding ComingTextColor}" BorderColor="{Binding ComingBorderColor}" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6" BackgroundColor="#202020"  Padding="16,10" CornerRadius="16">
                            <Label xct:ShadowEffect.Color="{Binding ComingTextColor}" TextColor="{Binding ComingTextColor}"  xct:ShadowEffect.Radius="3" Text="Coming Soon"  Style="{StaticResource Size_Large}" FontFamily="{Binding ComingFontFamily}"></Label>
                            <Frame.GestureRecognizers >
                                <TapGestureRecognizer Tapped="Update_MainBoardMovie" CommandParameter="ComingSoon"></TapGestureRecognizer>
                            </Frame.GestureRecognizers>
                        </Frame>
                    </FlexLayout>
                    <ScrollView Orientation="Horizontal" HorizontalScrollBarVisibility="Never">
                        <StackLayout BindableLayout.ItemsSource="{Binding MainBoardShowingMovie}" Orientation="Horizontal" Padding="16,0">
                            <BindableLayout.ItemTemplate>
                                <DataTemplate>
                                    <StackLayout Margin="6,0">
                                        <Frame  BackgroundColor="#202020" Padding="5"  HorizontalOptions="Start" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="6" 
                                            IsClippedToBounds="True" CornerRadius="16" >
                                            <ffimageloading:CachedImage Source="{Binding Poster}"  HeightRequest="300" WidthRequest="200"  Aspect="AspectFill"   xct:CornerRadiusEffect.CornerRadius="16" />
                                        </Frame>
                                        <StackLayout VerticalOptions="FillAndExpand" Spacing="0" Padding="6,0" WidthRequest="210" >

                                            <Label xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="{Binding MovieDetails.Title}" Style="{StaticResource Size_Medium}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>
                                            <Label xct:ShadowEffect.Color="#b3b3b3"  xct:ShadowEffect.Radius="2" Text="{Binding DirectorNameList}" Style="{StaticResource Size_Small}"  TextColor="#b3b3b3" MaxLines="2" LineBreakMode="TailTruncation"  LineHeight="1.15"></Label>


                                            <StackLayout IsVisible="{Binding IsShowing}" VerticalOptions="EndAndExpand" Orientation="Horizontal" Spacing="3">
                                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="{Binding StarRate}" Style="{StaticResource Size_Caption}"></Label>

                                                <local:StarView FillColors="#FF6400" Rating="{Binding FirstStar}"  Style="{StaticResource FirstStarMargin}"/>
                                                <local:StarView FillColors="#FF6400" Rating="{Binding SecondStar}" Style="{StaticResource AfterStarMargin}"/>
                                                <local:StarView FillColors="#FF6400" Rating="{Binding ThirdStar}" Style="{StaticResource AfterStarMargin}"/>
                                                <local:StarView FillColors="#FF6400" Rating="{Binding FourthStar}" Style="{StaticResource AfterStarMargin}"/>
                                                <local:StarView FillColors="#FF6400" Rating="{Binding FifthStar}" Style="{StaticResource AfterStarMargin}"/>

                                                <Label xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3"   
                                                       Text="{Binding Review,StringFormat=' ({0} reviews)'}" Style="{StaticResource Size_Caption}"></Label>
                                            </StackLayout>
                                            <StackLayout IsVisible="{Binding IsShowing,Converter={StaticResource TrueFalseConverter}}" VerticalOptions="EndAndExpand" Orientation="Horizontal" Spacing="3">
                                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="Release data :" Style="{StaticResource Size_Small}"></Label>
                                                <Label  xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" FontFamily="AorusFont_Bold"
                                                       VerticalTextAlignment="Center" Text="{Binding ReleaseDate}" Style="{StaticResource Size_Small}"></Label>

                                            </StackLayout>
                                        </StackLayout>
                                        <StackLayout.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="Nav_MovieDetails" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                        </StackLayout.GestureRecognizers>
                                    </StackLayout>
                                </DataTemplate>
                            </BindableLayout.ItemTemplate>
                        </StackLayout>
                    </ScrollView>
                    <BoxView HeightRequest="20"  Margin="0,-5,0,-15">
                        <BoxView.Background>
                            <LinearGradientBrush EndPoint="0,1">
                                <GradientStop Color="#080808"
                          Offset="0" />
                                <GradientStop Color="#202020"
                          Offset="0.5" />
                                <GradientStop Color="#080808"
                          Offset="1.0" />
                            </LinearGradientBrush>
                        </BoxView.Background>
                    </BoxView>
                    <!--Trending -->
                    <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="Trending" TextColor="#ff6400" Style="{StaticResource Size_Header}" FontFamily="AorusFont_Bold"></Label>

                    <StackLayout BindableLayout.ItemsSource="{Binding TrendingMovie}">
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <StackLayout Padding="16,0" Margin="0,0,0,6" Orientation="Horizontal" >
                                    <!--Image-->
                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                        <ffimageloading:CachedImage Source="{Binding Poster}"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />

                                    </Frame>
                                    <!--Info-->
                                    <StackLayout Spacing="0" Margin="6,0,0,0" HorizontalOptions="StartAndExpand" >
                                        <Label xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="{Binding MovieDetails.Title}" Style="{StaticResource Size_Medium}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation"></Label>
                                        <Label xct:ShadowEffect.Color="#b3b3b3"  xct:ShadowEffect.Radius="2" Text="{Binding DirectorNameList}" Style="{StaticResource Size_Subtitle}"  TextColor="#b3b3b3" MaxLines="2" LineBreakMode="TailTruncation"></Label>
                                        <StackLayout VerticalOptions="EndAndExpand" Orientation="Horizontal" Spacing="3">
                                            <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="{Binding StarRate}" Style="{StaticResource Size_Caption}"></Label>
                                            <local:StarView FillColors="#FF6400" Rating="{Binding FirstStar}"  Style="{StaticResource FirstStarMargin}"/>
                                            <local:StarView  FillColors="#FF6400"  Rating="{Binding SecondStar}" Style="{StaticResource AfterStarMargin}"/>
                                            <local:StarView  FillColors="#FF6400"  Rating="{Binding ThirdStar}" Style="{StaticResource AfterStarMargin}"/>
                                            <local:StarView  FillColors="#FF6400"  Rating="{Binding FourthStar}" Style="{StaticResource AfterStarMargin}"/>
                                            <local:StarView  FillColors="#FF6400"  Rating="{Binding FifthStar}" Style="{StaticResource AfterStarMargin}"/>
                                            <Label xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3"   
                                                       Text="{Binding Review,StringFormat=' ({0} reviews)'}" Style="{StaticResource Size_Caption}"></Label>
                                        </StackLayout>
                                    </StackLayout>
                                    <!--Booking Ticket-->
                                    <StackLayout Spacing="0" Margin="6,0,0,0" WidthRequest="35" HorizontalOptions="End" >
                                        <Image Source="BookTicket" Aspect="AspectFill" VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand"></Image>
                                        <StackLayout.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="Nav_MovieBooking" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                        </StackLayout.GestureRecognizers>
                                    </StackLayout>
                                    <StackLayout.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="Nav_MovieDetails" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                    </StackLayout.GestureRecognizers>
                                </StackLayout>
                            </DataTemplate>
                        </BindableLayout.ItemTemplate>

                    </StackLayout>
                    <!--LOOK FOR MORE MOVIE-->
                    <Frame xct:ShadowEffect.Color="#ff6400" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6"
                         Padding="36,6" BackgroundColor="#202020" BorderColor="#ff6400"  HorizontalOptions="Center" Margin="0,16" CornerRadius="12">
                        <Label  Text="Look for more Movie" FontFamily="AorusFont_Bold" Style="{StaticResource Size_Large}"  TextColor="#FF6400"></Label>
                        <Frame.GestureRecognizers>
                            <TapGestureRecognizer Tapped="Nav_Movie"></TapGestureRecognizer>
                        </Frame.GestureRecognizers>
                    </Frame>
                    <!--Content-->
                </StackLayout>
            </ScrollView>

            <!-- Header -->
            <FlexLayout  Direction="Row" JustifyContent="SpaceBetween" VerticalOptions="Start" HeightRequest="60"
                                xct:ShadowEffect.Color="Black" xct:ShadowEffect.Radius="60" >
                <FlexLayout.Background>
                    <LinearGradientBrush EndPoint="0,1">
                        <GradientStop Color="Black"
                          Offset="0.4" />
                        <GradientStop Color="Transparent"
                          Offset="1.0" />
                    </LinearGradientBrush>
                </FlexLayout.Background>
                <StackLayout Spacing="0" Orientation="Horizontal">
                    <Image Source="MiaoMovieLogo" Aspect="AspectFit" WidthRequest="60" ></Image>
                    <Image Source="MiaoMovieFont" Aspect="AspectFit" WidthRequest="60" ></Image>
                </StackLayout>


                <Frame Padding="6" BackgroundColor="#B3363636" CornerRadius="16" VerticalOptions="CenterAndExpand" Margin="16,10"   >
                    <Image Source="SearchWhite" Aspect="AspectFit" WidthRequest="35"></Image>
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Nav_SearchPopup"></TapGestureRecognizer>
                    </Frame.GestureRecognizers>
                </Frame>


            </FlexLayout>
            <sho:MaterialFrame x:Name="searchContainer" Padding="0"   AndroidBlurRadius="60" MaterialTheme="AcrylicBlur" IsVisible="false" Opacity="0">
                <Grid  BackgroundColor="#66080808" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand">
                    <StackLayout Padding="0,80,0,0" VerticalOptions="FillAndExpand" BindableLayout.ItemsSource="{Binding SearchResultMovie}">
                        <BoxView BackgroundColor="Transparent"   Margin="0,-10,0,-10" HeightRequest="40">
                            <BoxView.GestureRecognizers>
                                <TapGestureRecognizer Tapped="BlockPanel"></TapGestureRecognizer>
                            </BoxView.GestureRecognizers>
                        </BoxView>
                        <BindableLayout.ItemTemplate>
                            <DataTemplate>
                                <StackLayout>
                                    <Frame Padding="0,6" BackgroundColor="Transparent">
                                        <StackLayout Padding="16,0" Margin="0,0,0,6" Orientation="Horizontal" >
                                            <!--Image-->
                                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                <ffimageloading:CachedImage Source="{Binding Poster}"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />

                                            </Frame>
                                            <!--Info-->
                                            <StackLayout Spacing="0" Margin="6,0,0,0" HorizontalOptions="StartAndExpand" >
                                                <Label xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="{Binding MovieDetails.Title}" Style="{StaticResource Size_Medium}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation"></Label>
                                                <Label xct:ShadowEffect.Color="#b3b3b3"  xct:ShadowEffect.Radius="2" Text="{Binding DirectorNameList}" Style="{StaticResource Size_Subtitle}"  TextColor="#b3b3b3" MaxLines="2" LineBreakMode="TailTruncation"></Label>
                                                <StackLayout VerticalOptions="EndAndExpand" Orientation="Horizontal" Spacing="3">
                                                    <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="{Binding StarRate}" Style="{StaticResource Size_Caption}"></Label>
                                                    <local:StarView FillColors="#FF6400" Rating="{Binding FirstStar}"  Style="{StaticResource FirstStarMargin}"/>
                                                    <local:StarView  FillColors="#FF6400"  Rating="{Binding SecondStar}" Style="{StaticResource AfterStarMargin}"/>
                                                    <local:StarView  FillColors="#FF6400"  Rating="{Binding ThirdStar}" Style="{StaticResource AfterStarMargin}"/>
                                                    <local:StarView  FillColors="#FF6400"  Rating="{Binding FourthStar}" Style="{StaticResource AfterStarMargin}"/>
                                                    <local:StarView  FillColors="#FF6400"  Rating="{Binding FifthStar}" Style="{StaticResource AfterStarMargin}"/>
                                                </StackLayout>
                                            </StackLayout>
                                            <!--Booking Ticket-->
                                            <StackLayout Spacing="0" Margin="6,0,0,0" WidthRequest="35" HorizontalOptions="End" >
                                                <Image Source="BookTicket" Aspect="AspectFill" VerticalOptions="CenterAndExpand" HorizontalOptions="CenterAndExpand"></Image>
                                                <StackLayout.GestureRecognizers>
                                                    <TapGestureRecognizer Tapped="Nav_MovieBooking" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                                </StackLayout.GestureRecognizers>
                                            </StackLayout>
                                            <StackLayout.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="Nav_MovieDetails" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                            </StackLayout.GestureRecognizers>

                                        </StackLayout>
                                    </Frame>
                                    <BoxView Margin="32,0" HeightRequest="3" BackgroundColor="LightGray" Opacity="0.5"></BoxView>
                                </StackLayout>


                            </DataTemplate>
                        </BindableLayout.ItemTemplate>

                    </StackLayout>
                    <Frame IsVisible="{Binding IsSearching}" Padding="16" Margin="0,-120,0,0" HorizontalOptions="Center" VerticalOptions="Center" BackgroundColor="#080808" CornerRadius="16"
                           xct:ShadowEffect.Color="White" >

                        <StackLayout IsVisible="True">

                            <ActivityIndicator IsRunning="{Binding IsSearching}" Color="#ff6400" BackgroundColor="Transparent"></ActivityIndicator>

                            <Label xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="3" Text="finding movies..." Style="{StaticResource Size_Subtitle}"></Label>


                        </StackLayout>


                    </Frame>
                    <StackLayout VerticalOptions="Start" Orientation="Horizontal"   HorizontalOptions="FillAndExpand" Padding="12,8" BackgroundColor="#363636" >

                        <Image Source="SearchWhite" Aspect="AspectFit" WidthRequest="35"></Image>

                        <Entry x:Name="HomeSearchEntry" Style="{StaticResource Size_Large}" FontFamily="AorusFont_Bold" TextColor="White" Placeholder="Search Movie..." PlaceholderColor="#8c8c8c" ClearButtonVisibility="WhileEditing" 
                               HorizontalOptions="FillAndExpand" TextChanged="SearchMovie_Changed">
                        </Entry>
                    </StackLayout>
                </Grid>
                <sho:MaterialFrame.GestureRecognizers>
                    <TapGestureRecognizer Tapped="Quit_SearchContainer"></TapGestureRecognizer>
                </sho:MaterialFrame.GestureRecognizers>
            </sho:MaterialFrame>

        </Grid>
        <!--Ticket-->
        <StackLayout IsVisible="{Binding TicketContainerVisible}" Spacing="0" >
            <!-- Header -->
            <sho:MaterialFrame VerticalOptions="Start" HeightRequest="65" Padding="0" MaterialTheme="AcrylicBlur">
                <FlexLayout Padding="0,6" BackgroundColor="#90080808"  Direction="Row" JustifyContent="SpaceBetween" 
                                xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="60" >
                    <StackLayout Spacing="0" Orientation="Horizontal" >
                        <Image Source="MiaoMovieLogo" Aspect="AspectFit" WidthRequest="60" ></Image>
                        <Image Source="MiaoMovieFont" Aspect="AspectFit" WidthRequest="60" ></Image>
                    </StackLayout>

                </FlexLayout>
            </sho:MaterialFrame>

            <StackLayout Padding="0,0,0,50" VerticalOptions="FillAndExpand">

                <xct:TabView TabStripPlacement="Top"  xct:ShadowEffect.Color="#ffffff" TabIndicatorColor="#FF6400" VerticalOptions="FillAndExpand" >

                    <xct:TabView.Background>
                        <LinearGradientBrush StartPoint="0,1">
                            <GradientStop Color="#080808" Offset="0"></GradientStop>
                        </LinearGradientBrush>
                    </xct:TabView.Background>
                    <!--To Claim Ticket-->
                    <xct:TabViewItem Text="To Claim " BadgeText="{Binding ClaimTicketCount}" Style="{StaticResource TabviewItemDisplay}"  >
                        <StackLayout BackgroundColor="#121212">
                            <ScrollView VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never" Padding="0,0,0,40">
                                <StackLayout Spacing="0">
                                    <StackLayout VerticalOptions="FillAndExpand" Spacing="6"  Padding="0,16,0,10" BindableLayout.ItemsSource="{Binding ClaimTicketLists}">

                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <Frame Padding="0" Margin="16,0,16,10" IsClippedToBounds="True" HeightRequest="{StaticResource TicketHeightRequest}" CornerRadius="16" xct:ShadowEffect.Color="#727272">
                                                    <Grid ColumnSpacing="0" RowSpacing="0" >
                                                        <ffimageloading:CachedImage TranslationX="-40" Margin="0,-80,0,0" TranslationY="70" VerticalOptions="FillAndExpand" HorizontalOptions="StartAndExpand" WidthRequest="200" Source="{Binding MoviePoster}" Aspect="AspectFill"></ffimageloading:CachedImage>
                                                        <StackLayout Margin="100,0,0,0" Padding="36,6,0,6" Spacing="0" VerticalOptions="FillAndExpand" >
                                                            <StackLayout.Background>
                                                                <LinearGradientBrush StartPoint="0,1">
                                                                    <GradientStop Color="Transparent" Offset="0.02"></GradientStop>
                                                                    <GradientStop Color="#080808" Offset=".08"></GradientStop>
                                                                </LinearGradientBrush>
                                                            </StackLayout.Background>
                                                            <Label Text="{Binding MovieTitle}" LineBreakMode="TailTruncation" MaxLines="2" xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Date}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Time}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FFFFFF"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding ReservationCode}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>

                                                            <Frame  VerticalOptions="EndAndExpand" Margin="32,6" Padding="16,0" CornerRadius="32" BackgroundColor="{Binding Status,Converter={StaticResource TicketBackgroundColorConverter}}" xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="6">
                                                                <Label  xct:ShadowEffect.Color="#000000" xct:ShadowEffect.Radius="3" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Text="{Binding Status,Converter={StaticResource TicketTextConverter}}" Style="{StaticResource Size_Small}"></Label>

                                                            </Frame>
                                                        </StackLayout>
                                                    </Grid>
                                                    <Frame.GestureRecognizers>
                                                        <TapGestureRecognizer Tapped="Nav_ClaimTicketPopup" CommandParameter="{Binding TicketId}"></TapGestureRecognizer>
                                                    </Frame.GestureRecognizers>
                                                </Frame>


                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                        <BindableLayout.EmptyView>
                                            <Frame Padding="0" BackgroundColor="Transparent">
                                                <Frame.Triggers>
                                                    <DataTrigger TargetType="Frame" Binding="{Binding IsLogged}" Value="true">
                                                        <Setter  Property="Content">
                                                            <StackLayout>

                                                            </StackLayout>
                                                        </Setter>
                                                    </DataTrigger>
                                                    <DataTrigger TargetType="Frame" Binding="{Binding IsLogged}" Value="false">
                                                        <Setter Property="Content">
                                                            <StackLayout Margin="16,108,16,60" HorizontalOptions="Center" VerticalOptions="Center">
                                                                <!--Logo Image-->
                                                                <StackLayout  Orientation="Horizontal" HorizontalOptions="Center" Spacing="0" Margin="0,0,0,16" >
                                                                    <ffimageloading:CachedImage Source="MiaoMovieLogo" HorizontalOptions="Center" VerticalOptions="FillAndExpand" Aspect="AspectFit" WidthRequest="100"></ffimageloading:CachedImage>
                                                                    <ffimageloading:CachedImage Source="MiaoMovieFont"  HorizontalOptions="Center" VerticalOptions="FillAndExpand"  Aspect="AspectFit" WidthRequest="160"></ffimageloading:CachedImage>
                                                                </StackLayout>
                                                                <Label Text="Sign in to enjoy more feature" Style="{StaticResource Size_Title}" HorizontalOptions="Center"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>
                                                                <Frame BackgroundColor="#ff6400" CornerRadius="50" HorizontalOptions="Center" Padding="48,16" Margin="0,32">
                                                                    <Label xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="3"  Text="Sign In" HorizontalOptions="Center" Style="{StaticResource Size_Medium}"></Label>
                                                                    <Frame.GestureRecognizers>
                                                                        <TapGestureRecognizer Tapped="Nav_UserLoginPage" CommandParameter="RegisterStep1"></TapGestureRecognizer>
                                                                    </Frame.GestureRecognizers>
                                                                </Frame>
                                                            </StackLayout>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Frame.Triggers>
                                            </Frame>
                                        </BindableLayout.EmptyView>


                                    </StackLayout>


                                    <Frame IsVisible="{Binding ClaimLoadMoreVisible}" xct:ShadowEffect.Color="#ff6400" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6" Padding="36,6" BackgroundColor="#202020" BorderColor="#ff6400"  HorizontalOptions="Center" Margin="0,16" CornerRadius="12">
                                        <Label  Text="Load More" FontFamily="AorusFont_Bold" Style="{StaticResource Size_Large}"  TextColor="#FF6400"></Label>
                                        <Frame.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="TicktLoadMore_Clicked" CommandParameter="Claim"></TapGestureRecognizer>
                                        </Frame.GestureRecognizers>
                                    </Frame>
                                </StackLayout>

                            </ScrollView>
                        </StackLayout>

                    </xct:TabViewItem>
                    <!--Review Ticket-->
                    <xct:TabViewItem Text="To Review" BadgeText="{Binding ReviewTicketCount}" Style="{StaticResource TabviewItemDisplay}"   >
                        <StackLayout BackgroundColor="#121212">
                            <ScrollView VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never" Padding="0,0,0,40">
                                <StackLayout Spacing="0">
                                    <StackLayout VerticalOptions="FillAndExpand" Spacing="6" Padding="0,16,0,10"  BindableLayout.ItemsSource="{Binding ReviewTicketLists}">

                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <Frame Padding="0" Margin="16,0,16,10" IsClippedToBounds="True" HeightRequest="{StaticResource TicketHeightRequest}" CornerRadius="16" xct:ShadowEffect.Color="#727272">
                                                    <Grid ColumnSpacing="0" RowSpacing="0" >
                                                        <ffimageloading:CachedImage TranslationX="-40" Margin="0,-80,0,0" TranslationY="70" VerticalOptions="FillAndExpand" HorizontalOptions="StartAndExpand" WidthRequest="200" Source="{Binding MoviePoster}" Aspect="AspectFill"></ffimageloading:CachedImage>
                                                        <StackLayout Margin="100,0,0,0" Padding="36,6,0,6" Spacing="0" VerticalOptions="FillAndExpand" >
                                                            <StackLayout.Background>
                                                                <LinearGradientBrush StartPoint="0,1">
                                                                    <GradientStop Color="Transparent" Offset="0.02"></GradientStop>
                                                                    <GradientStop Color="#080808" Offset=".08"></GradientStop>
                                                                </LinearGradientBrush>
                                                            </StackLayout.Background>
                                                            <Label Text="{Binding MovieTitle}" LineBreakMode="TailTruncation" MaxLines="2" xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Date}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Time}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FFFFFF"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding ReservationCode}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>

                                                            <Frame  VerticalOptions="EndAndExpand" Margin="32,6" Padding="16,0" CornerRadius="32" BackgroundColor="{Binding Status,Converter={StaticResource TicketBackgroundColorConverter}}" xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="6">
                                                                <Label  xct:ShadowEffect.Color="#000000" xct:ShadowEffect.Radius="3" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Text="{Binding Status,Converter={StaticResource TicketTextConverter}}" Style="{StaticResource Size_Small}"></Label>
                                                                <Frame.GestureRecognizers>

                                                                </Frame.GestureRecognizers>
                                                            </Frame>
                                                        </StackLayout>
                                                    </Grid>
                                                </Frame>


                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                        <BindableLayout.EmptyView>
                                            <Frame Padding="0" BackgroundColor="Transparent">
                                                <Frame.Triggers>
                                                    <DataTrigger TargetType="Frame" Binding="{Binding IsLogged}" Value="false">
                                                        <Setter Property="Content">
                                                            <StackLayout Margin="16,108,16,60" HorizontalOptions="Center" VerticalOptions="Center">
                                                                <!--Logo Image-->
                                                                <StackLayout  Orientation="Horizontal" HorizontalOptions="Center" Spacing="0" Margin="0,0,0,16" >
                                                                    <ffimageloading:CachedImage Source="MiaoMovieLogo" HorizontalOptions="Center" VerticalOptions="FillAndExpand" Aspect="AspectFit" WidthRequest="100"></ffimageloading:CachedImage>
                                                                    <ffimageloading:CachedImage Source="MiaoMovieFont"  HorizontalOptions="Center" VerticalOptions="FillAndExpand"  Aspect="AspectFit" WidthRequest="160"></ffimageloading:CachedImage>
                                                                </StackLayout>
                                                                <Label Text="Sign in to enjoy more feature" Style="{StaticResource Size_Title}" HorizontalOptions="Center"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>
                                                                <Frame BackgroundColor="#ff6400" CornerRadius="50" HorizontalOptions="Center" Padding="48,16" Margin="0,32">
                                                                    <Label xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="3"  Text="Sign In" HorizontalOptions="Center" Style="{StaticResource Size_Medium}"></Label>
                                                                    <Frame.GestureRecognizers>
                                                                        <TapGestureRecognizer Tapped="Nav_UserLoginPage" CommandParameter="RegisterStep1"></TapGestureRecognizer>
                                                                    </Frame.GestureRecognizers>
                                                                </Frame>
                                                            </StackLayout>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Frame.Triggers>
                                            </Frame>
                                        </BindableLayout.EmptyView>
                                    </StackLayout>


                                    <Frame IsVisible="{Binding ReviewLoadMoreVisible}" xct:ShadowEffect.Color="#ff6400" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6" Padding="36,6" BackgroundColor="#202020" BorderColor="#ff6400"  HorizontalOptions="Center" Margin="0,16" CornerRadius="12">
                                        <Label  Text="Load More" FontFamily="AorusFont_Bold" Style="{StaticResource Size_Large}"  TextColor="#FF6400"></Label>
                                        <Frame.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="TicktLoadMore_Clicked" CommandParameter="Review"></TapGestureRecognizer>
                                        </Frame.GestureRecognizers>
                                    </Frame>
                                </StackLayout>
                            </ScrollView>
                        </StackLayout>
                    </xct:TabViewItem>
                    <!--Expired/Complete Ticket-->
                    <xct:TabViewItem Text="Expired" BadgeText="{Binding ExpiredTicketCount}" Style="{StaticResource TabviewItemDisplay}"   >
                        <StackLayout BackgroundColor="#121212">
                            <ScrollView VerticalOptions="FillAndExpand" VerticalScrollBarVisibility="Never" Padding="0,0,0,40">
                                <StackLayout>
                                    <StackLayout VerticalOptions="FillAndExpand" Spacing="6"  Padding="0,16,0,0" BindableLayout.ItemsSource="{Binding ExpiredTicketLists}">

                                        <BindableLayout.ItemTemplate>
                                            <DataTemplate>
                                                <Frame Padding="0" Margin="16,0,16,10" IsClippedToBounds="True"  HeightRequest="{StaticResource TicketHeightRequest}" CornerRadius="16" xct:ShadowEffect.Color="#727272">
                                                    <Grid ColumnSpacing="0" RowSpacing="0" >
                                                        <ffimageloading:CachedImage TranslationX="-40" Margin="0,-80,0,0" TranslationY="70" VerticalOptions="FillAndExpand" HorizontalOptions="StartAndExpand" WidthRequest="200" Source="{Binding MoviePoster}" Aspect="AspectFill"></ffimageloading:CachedImage>
                                                        <StackLayout Margin="100,0,0,0" Padding="36,6,0,6" Spacing="0" VerticalOptions="FillAndExpand" >
                                                            <StackLayout.Background>
                                                                <LinearGradientBrush StartPoint="0,1">
                                                                    <GradientStop Color="Transparent" Offset="0.02"></GradientStop>
                                                                    <GradientStop Color="#080808" Offset=".08"></GradientStop>
                                                                </LinearGradientBrush>
                                                            </StackLayout.Background>
                                                            <Label Text="{Binding MovieTitle}" LineBreakMode="TailTruncation" MaxLines="2" xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Date}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding Time}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FFFFFF"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="{Binding ReservationCode}" LineBreakMode="TailTruncation" MaxLines="1" xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Caption}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>

                                                            <Frame  VerticalOptions="EndAndExpand" Margin="32,6" Padding="16,0" CornerRadius="32" BackgroundColor="{Binding Status,Converter={StaticResource TicketBackgroundColorConverter}}" xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="6">
                                                                <Label  xct:ShadowEffect.Color="#000000" xct:ShadowEffect.Radius="3" HorizontalTextAlignment="Center" VerticalTextAlignment="Center" Text="{Binding Status,Converter={StaticResource TicketTextConverter}}" Style="{StaticResource Size_Small}"></Label>
                                                            </Frame>
                                                        </StackLayout>
                                                    </Grid>
                                                    <Frame.GestureRecognizers>
                                                        <TapGestureRecognizer Tapped="TicketFrame_Clicked" CommandParameter="{Binding Id}"></TapGestureRecognizer>
                                                    </Frame.GestureRecognizers>
                                                </Frame>


                                            </DataTemplate>
                                        </BindableLayout.ItemTemplate>
                                        <BindableLayout.EmptyView>
                                            <Frame Padding="0" BackgroundColor="Transparent">
                                                <Frame.Triggers>
                                                    <DataTrigger TargetType="Frame" Binding="{Binding IsLogged}" Value="true">
                                                        <Setter  Property="Content">
                                                            <StackLayout>
                                                            </StackLayout>
                                                        </Setter>
                                                    </DataTrigger>
                                                    <DataTrigger TargetType="Frame" Binding="{Binding IsLogged}" Value="false">
                                                        <Setter Property="Content">
                                                            <StackLayout Margin="16,108,16,60" HorizontalOptions="Center" VerticalOptions="Center">
                                                                <!--Logo Image-->
                                                                <StackLayout  Orientation="Horizontal" HorizontalOptions="Center" Spacing="0" Margin="0,0,0,16" >
                                                                    <ffimageloading:CachedImage Source="MiaoMovieLogo" HorizontalOptions="Center" VerticalOptions="FillAndExpand" Aspect="AspectFit" WidthRequest="100"></ffimageloading:CachedImage>
                                                                    <ffimageloading:CachedImage Source="MiaoMovieFont"  HorizontalOptions="Center" VerticalOptions="FillAndExpand"  Aspect="AspectFit" WidthRequest="160"></ffimageloading:CachedImage>
                                                                </StackLayout>
                                                                <Label Text="Sign in to enjoy more feature" Style="{StaticResource Size_Title}" HorizontalOptions="Center"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>
                                                                <Frame BackgroundColor="#ff6400" CornerRadius="50" HorizontalOptions="Center" Padding="48,16" Margin="0,32">
                                                                    <Label xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="3"  Text="Sign In" HorizontalOptions="Center" Style="{StaticResource Size_Medium}"></Label>
                                                                    <Frame.GestureRecognizers>
                                                                        <TapGestureRecognizer Tapped="Nav_UserLoginPage" CommandParameter="RegisterStep1"></TapGestureRecognizer>
                                                                    </Frame.GestureRecognizers>
                                                                </Frame>
                                                            </StackLayout>
                                                        </Setter>
                                                    </DataTrigger>
                                                </Frame.Triggers>
                                            </Frame>
                                        </BindableLayout.EmptyView>

                                    </StackLayout>
                                    <Frame IsVisible="{Binding ExpiredLoadMoreVisible}" xct:ShadowEffect.Color="#ff6400" xct:ShadowEffect.OffsetY="-6"  xct:ShadowEffect.Radius="6" Padding="36,6" BackgroundColor="#202020" BorderColor="#ff6400"  HorizontalOptions="Center" Margin="0,16" CornerRadius="12">
                                        <Label  Text="Load More" FontFamily="AorusFont_Bold" Style="{StaticResource Size_Large}"  TextColor="#FF6400"></Label>
                                        <Frame.GestureRecognizers>
                                            <TapGestureRecognizer Tapped="TicktLoadMore_Clicked" CommandParameter="Expired"></TapGestureRecognizer>
                                        </Frame.GestureRecognizers>
                                    </Frame>
                                </StackLayout>
                            </ScrollView>
                        </StackLayout>
                    </xct:TabViewItem>
                </xct:TabView>
            </StackLayout>
        </StackLayout >
        <!--Movie-->
        <Grid IsVisible="{Binding MovieContainerVisible}" >

            <ScrollView VerticalOptions="FillAndExpand" Padding="0,80,0,50">
                <StackLayout HorizontalOptions="FillAndExpand" VerticalOptions="FillAndExpand">
                    <!--Categories-->
                    <StackLayout Orientation="Horizontal">
                        <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="Categories" TextColor="#ff6400" Style="{StaticResource Size_Title}" FontFamily="AorusFont_Bold" HorizontalOptions="FillAndExpand"></Label>
                        <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="View all >" TextColor="#FFFFFF" Style="{StaticResource Size_Subtitle}" FontFamily="AorusFont_Regular" HorizontalOptions="End" VerticalOptions="Center"></Label>
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="Nav_MovieCategoryPage" CommandParameter="Normal"></TapGestureRecognizer>
                        </StackLayout.GestureRecognizers>
                    </StackLayout>

                    <CollectionView HeightRequest="50" ItemsSource="{Binding CategoriesList}" ItemsLayout="HorizontalList">
                        <CollectionView.Header>
                            <BoxView WidthRequest="16"></BoxView>
                        </CollectionView.Header>
                        <CollectionView.ItemTemplate>

                            <DataTemplate>
                                <StackLayout Margin="12,0">
                                    <Frame xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" BorderColor="#FF6400" CornerRadius="16" Padding="16,6" BackgroundColor="#363636" VerticalOptions="Start" HorizontalOptions="Start">
                                        <Label Text="{Binding}" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Style="{StaticResource Size_Medium}"></Label>
                                    </Frame>
                                    <StackLayout.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="Nav_MovieCategoryPage" CommandParameter="{Binding}"></TapGestureRecognizer>
                                    </StackLayout.GestureRecognizers>
                                </StackLayout>

                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <!-- Most popular-->
                    <StackLayout Orientation="Horizontal">
                        <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="Most Popular" TextColor="#ff6400" Style="{StaticResource Size_Title}" FontFamily="AorusFont_Bold" HorizontalOptions="FillAndExpand"></Label>
                        <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="View all >" TextColor="#FFFFFF" Style="{StaticResource Size_Subtitle}" FontFamily="AorusFont_Regular" HorizontalOptions="End" VerticalOptions="Center"></Label>
                        <StackLayout.GestureRecognizers>
                            <TapGestureRecognizer Tapped="Nav_MovieCategoryPage" CommandParameter="Normal"></TapGestureRecognizer>
                        </StackLayout.GestureRecognizers>
                    </StackLayout>

                    <CollectionView ItemsSource="{Binding MoviePageMovies}" ItemsLayout="HorizontalList" HeightRequest="190" >
                        <CollectionView.Header>
                            <BoxView WidthRequest="16"></BoxView>
                        </CollectionView.Header>
                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout Margin="16,0,16,0" WidthRequest="110" VerticalOptions="StartAndExpand">
                                    <Frame  IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="150"  WidthRequest="110" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                        <ffimageloading:CachedImage Source="{Binding Poster}"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                                    </Frame>

                                    <Label Margin="12,0" HorizontalTextAlignment="Center" VerticalOptions="End"  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="{Binding MovieDetails.Title}" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>
                                    <StackLayout.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="Nav_MovieDetails" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                    </StackLayout.GestureRecognizers>
                                </StackLayout>

                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                    <!--Movies-->
                    <Label Margin="16,10" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Text="Movies" TextColor="#ff6400" Style="{StaticResource Size_Title}" FontFamily="AorusFont_Bold" HorizontalOptions="FillAndExpand"></Label>

                    <CollectionView Margin="16,0" HeightRequest="{Binding MoviePageMovies,Converter={StaticResource MovieCollectionViewHeightConverter}}" RemainingItemsThreshold="1" ItemsSource="{Binding MoviePageMovies}"  VerticalScrollBarVisibility="Never" >
                        <CollectionView.ItemsLayout>
                            <GridItemsLayout Orientation="Vertical"  Span="3"  HorizontalItemSpacing="12" VerticalItemSpacing="12" />
                        </CollectionView.ItemsLayout>

                        <CollectionView.ItemTemplate>
                            <DataTemplate>
                                <StackLayout>

                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="150" WidthRequest="110" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                        <ffimageloading:CachedImage Source="{Binding Poster}"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                                    </Frame>
                                    <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="{Binding MovieDetails.Title}" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                                    <StackLayout IsVisible="{Binding IsShowing}" Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                        <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="{Binding LastStar}" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                        <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="{Binding StarRate}" Style="{StaticResource Size_Caption}"></Label>
                                    </StackLayout>
                                    <StackLayout IsVisible="{Binding IsShowing,Converter={StaticResource TrueFalseConverter}}" VerticalOptions="EndAndExpand"  Spacing="-1">
                                        <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="Release data :" Style="{StaticResource Size_Small}"></Label>
                                        <Label  xct:ShadowEffect.Color="#FF6400"  xct:ShadowEffect.Radius="3" FontFamily="AorusFont_Bold"
                                                       VerticalTextAlignment="Center" Text="{Binding ReleaseDate}" Style="{StaticResource Size_Small}"></Label>

                                    </StackLayout>
                                    <StackLayout.GestureRecognizers>
                                        <TapGestureRecognizer Tapped="Nav_MovieDetails" CommandParameter="{Binding MovieId}"></TapGestureRecognizer>
                                    </StackLayout.GestureRecognizers>
                                </StackLayout>

                            </DataTemplate>
                        </CollectionView.ItemTemplate>
                    </CollectionView>

                </StackLayout>
            </ScrollView>

            <!-- Header -->
            <sho:MaterialFrame VerticalOptions="Start" HeightRequest="65" Padding="0" MaterialTheme="AcrylicBlur">
                <FlexLayout Padding="0,6" BackgroundColor="#90080808"  Direction="Row" JustifyContent="SpaceBetween" 
                                xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="60" >

                    <StackLayout Spacing="0" Orientation="Horizontal" >
                        <Image Source="MiaoMovieLogo" Aspect="AspectFit" WidthRequest="60" ></Image>
                        <Image Source="MiaoMovieFont" Aspect="AspectFit" WidthRequest="60" ></Image>
                    </StackLayout>
                    <StackLayout Orientation="Horizontal">
                        <Frame Padding="6" BackgroundColor="#B3080808" CornerRadius="16" VerticalOptions="CenterAndExpand" Margin="0,6,6,6"   >
                            <Image Source="SearchWhite" Aspect="AspectFit" WidthRequest="35"></Image>
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="Nav_MovieCategoryPage" CommandParameter="Normal"></TapGestureRecognizer>
                            </Frame.GestureRecognizers>
                        </Frame>
                        <Frame Padding="6" BackgroundColor="#B3080808" CornerRadius="16" VerticalOptions="CenterAndExpand" Margin="0,6,16,6"   >
                            <Image Source="FilterIcon" Aspect="AspectFit" WidthRequest="35"></Image>
                            <Frame.GestureRecognizers>
                                <TapGestureRecognizer Tapped="Nav_MovieCategoryPage" CommandParameter="Filter"></TapGestureRecognizer>
                            </Frame.GestureRecognizers>
                        </Frame>
                    </StackLayout>

                </FlexLayout>
            </sho:MaterialFrame>



        </Grid >
        <!--Favorite-->
        <StackLayout IsVisible="{Binding FavoriteContainerVisible}">
            <!-- Header -->
            <sho:MaterialFrame VerticalOptions="Start" HeightRequest="65" Padding="0" MaterialTheme="AcrylicBlur">
                <FlexLayout Padding="0,6" BackgroundColor="#90080808"  Direction="Row" JustifyContent="SpaceBetween" 
                                xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="60" >

                    <StackLayout Spacing="0" Orientation="Horizontal" >
                        <Image Source="MiaoMovieLogo" Aspect="AspectFit" WidthRequest="60" ></Image>
                        <Image Source="MiaoMovieFont" Aspect="AspectFit" WidthRequest="60" ></Image>
                    </StackLayout>

                </FlexLayout>
            </sho:MaterialFrame>

            <ScrollView  Padding="0,0,0,50">
                <StackLayout>
                    <Label Text="Favorite" Style="{StaticResource Size_Header}" ></Label>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition></RowDefinition>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                            <ColumnDefinition Width="*"></ColumnDefinition>
                        </Grid.ColumnDefinitions>

                        <StackLayout Grid.Column="0">

                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="200" WidthRequest="150" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                <ffimageloading:CachedImage Source="Movie6"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                            </Frame>
                            <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="DeadPool" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="0.2" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="4.2" Style="{StaticResource Size_Caption}"></Label>
                            </StackLayout>


                        </StackLayout>

                        <StackLayout Grid.Column="1">

                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="200" WidthRequest="150" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                <ffimageloading:CachedImage Source="Movie6"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                            </Frame>
                            <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="DeadPool" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="0.2" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="4.2" Style="{StaticResource Size_Caption}"></Label>
                            </StackLayout>


                        </StackLayout>

                        <StackLayout Grid.Row="1" Grid.Column="0">

                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="200" WidthRequest="150" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                <ffimageloading:CachedImage Source="Movie6"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                            </Frame>
                            <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="DeadPool" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="0.2" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="4.2" Style="{StaticResource Size_Caption}"></Label>
                            </StackLayout>


                        </StackLayout>

                        <StackLayout Grid.Row="1" Grid.Column="1">

                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="200" WidthRequest="150" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                <ffimageloading:CachedImage Source="Movie6"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                            </Frame>
                            <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="DeadPool" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="0.2" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="4.2" Style="{StaticResource Size_Caption}"></Label>
                            </StackLayout>


                        </StackLayout>

                        <StackLayout Grid.Row="2" Grid.Column="0">

                            <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="200" WidthRequest="150" MinimumWidthRequest="110" HorizontalOptions="Center"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                <ffimageloading:CachedImage Source="Movie6"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" VerticalOptions="FillAndExpand" />
                            </Frame>
                            <Label VerticalOptions="CenterAndExpand" VerticalTextAlignment="Center" HorizontalTextAlignment="Center"  HorizontalOptions="FillAndExpand" xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" Text="DeadPool" Style="{StaticResource Size_Small}" TextColor="White" MaxLines="2" LineBreakMode="TailTruncation" LineHeight="1.15"></Label>



                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center" VerticalOptions="End">

                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="1" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <local:StarView HorizontalOptions="Start" FillColors="#FF6400" Rating="0.2" Style="{StaticResource FirstStarMargin}"></local:StarView>
                                <Label  xct:ShadowEffect.Color="White"  xct:ShadowEffect.Radius="3" 
                                                       VerticalTextAlignment="Center" Text="4.2" Style="{StaticResource Size_Caption}"></Label>
                            </StackLayout>

                        </StackLayout>



                    </Grid>

                </StackLayout>

            </ScrollView>


        </StackLayout>
        <!--User-->
        <Grid IsVisible="{Binding UserContainerVisible}" >

            <ScrollView Scrolled="ShowHeaderBackground"  Padding="0,0,0,50" BackgroundColor="#ff6400">
                <ScrollView.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FF6400" Offset="0"/>
                        <GradientStop Color="#ffb145" Offset="0.3"/>
                        <GradientStop Color="#FF6400" Offset="0.7"/>
                        <GradientStop Color="#ffb145" Offset="1"/>
                    </LinearGradientBrush>
                </ScrollView.Background>

                <Grid>
                    <pancake:PancakeView BackgroundColor="#202020" Margin="-120,180,-120,0" CornerRadius="310,310,0,0" Padding="120,0" >
                        <pancake:PancakeView.Triggers>
                            <DataTrigger TargetType="pancake:PancakeView" Binding="{Binding IsLogged}" Value="true">
                                <Setter Property="Content">
                                    <Setter.Value>
                                        <StackLayout Margin="16,80,16,60" BindingContext="{Binding LoggedUser}">

                                            <Label Text="{Binding Name}" Style="{StaticResource Size_Header}" HorizontalOptions="Center"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>
                                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                                                <ffimageloading:CachedImage Source="EmailIcon"></ffimageloading:CachedImage>
                                                <Label Text="{Binding Email}" Style="{StaticResource Size_Subtitle}"  Opacity="0.8" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>

                                            </StackLayout>
                                            <StackLayout Orientation="Horizontal" HorizontalOptions="Center">
                                                <ffimageloading:CachedImage Source="PhoneIcon"></ffimageloading:CachedImage>

                                                <Label Text="{Binding Phone}" Style="{StaticResource Size_Subtitle}" HorizontalOptions="Center" Opacity="0.8" xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>

                                            </StackLayout>
                                            <!--Recently Watch-->
                                            <StackLayout Orientation="Horizontal">
                                                <Label Text="Recently Watch"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Style="{StaticResource Size_Title}" FontFamily="AorusFont_Bold" HorizontalOptions="FillAndExpand"></Label>
                                                <Label Text="View All"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="6" Style="{StaticResource Size_Subtitle}" VerticalOptions="End" HorizontalOptions="End" ></Label>

                                            </StackLayout>
                                            <!--Recently Watch List-->
                                            <ScrollView Orientation="Horizontal" HorizontalOptions="FillAndExpand" HorizontalScrollBarVisibility="Never">
                                                <StackLayout Orientation="Horizontal">

                                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                        <ffimageloading:CachedImage Source="Movie1"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                    </Frame>
                                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                        <ffimageloading:CachedImage Source="Movie2"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                    </Frame>
                                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                        <ffimageloading:CachedImage Source="Movie3"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                    </Frame>
                                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                        <ffimageloading:CachedImage Source="Movie4"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                    </Frame>
                                                    <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="90" MinimumWidthRequest="90" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                        <ffimageloading:CachedImage Source="Movie5"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                    </Frame>

                                                </StackLayout>
                                            </ScrollView>

                                            <BoxView HeightRequest="4" Margin="16,10,16,6" >
                                                <BoxView.Background>
                                                    <LinearGradientBrush EndPoint="0,1">
                                                        <GradientStop Color="#262626"
                                                  Offset="0" />
                                                        <GradientStop Color="#363636"
                                                   Offset="0.5" />
                                                        <GradientStop Color="#262626"
                                                  Offset="1.0" />
                                                    </LinearGradientBrush>
                                                </BoxView.Background>
                                            </BoxView>

                                            <!--Recently Review-->
                                            <StackLayout>



                                                <StackLayout Orientation="Horizontal">
                                                    <Label Text="Recently Review (6)"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="6" Style="{StaticResource Size_Title}" FontFamily="AorusFont_Bold" HorizontalOptions="FillAndExpand"></Label>
                                                    <Label Text="View All"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="6" Style="{StaticResource Size_Subtitle}" VerticalOptions="End" HorizontalOptions="End" ></Label>

                                                </StackLayout>
                                                <BoxView HeightRequest="2" Margin="6" >
                                                    <BoxView.Background>
                                                        <LinearGradientBrush EndPoint="0,1">
                                                            <GradientStop Color="#262626"
                                                  Offset="0" />
                                                            <GradientStop Color="#363636"
                                                   Offset="0.5" />
                                                            <GradientStop Color="#262626"
                                                  Offset="1.0" />
                                                        </LinearGradientBrush>
                                                    </BoxView.Background>
                                                </BoxView>

                                                <!--Bindable List-->
                                                <StackLayout Spacing="0">
                                                    <StackLayout Orientation="Horizontal">
                                                        <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="70" MinimumWidthRequest="70" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                            <ffimageloading:CachedImage Source="Movie3"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                        </Frame>
                                                        <StackLayout Spacing="0">
                                                            <Label Text="Avenger : End Game"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="30-08-2023 14:59:30" xct:ShadowEffect.Color="#777777"  xct:ShadowEffect.Radius="1" Style="{StaticResource Size_Micro}" Opacity="0.7" ></Label>
                                                            <Label MaxLines="2" LineBreakMode="TailTruncation"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="2" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris "></Label>
                                                            <StackLayout Orientation="Horizontal">
                                                                <local:StarView FillColors="#FF6400" Rating="1"  Style="{StaticResource FirstStarMargin}"/>
                                                                <Label Text="5"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}"></Label>
                                                            </StackLayout>

                                                        </StackLayout>
                                                    </StackLayout>
                                                    <BoxView HeightRequest="2" Margin="6,10,6,6" >
                                                        <BoxView.Background>
                                                            <LinearGradientBrush EndPoint="0,1">
                                                                <GradientStop Color="#262626"
                                                  Offset="0" />
                                                                <GradientStop Color="#363636"
                                                   Offset="0.5" />
                                                                <GradientStop Color="#262626"
                                                  Offset="1.0" />
                                                            </LinearGradientBrush>
                                                        </BoxView.Background>
                                                    </BoxView>
                                                </StackLayout>

                                                <StackLayout Spacing="0">
                                                    <StackLayout Orientation="Horizontal">
                                                        <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="70" MinimumWidthRequest="70" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                            <ffimageloading:CachedImage Source="Movie3"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                        </Frame>
                                                        <StackLayout Spacing="0">
                                                            <Label Text="Avenger : End Game"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="30-08-2023 14:59:30" xct:ShadowEffect.Color="#777777"  xct:ShadowEffect.Radius="1" Style="{StaticResource Size_Micro}" Opacity="0.7" ></Label>
                                                            <Label MaxLines="2" LineBreakMode="TailTruncation"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="2" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris "></Label>
                                                            <StackLayout Orientation="Horizontal">
                                                                <local:StarView FillColors="#FF6400" Rating="1"  Style="{StaticResource FirstStarMargin}"/>
                                                                <Label Text="5"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}"></Label>
                                                            </StackLayout>

                                                        </StackLayout>
                                                    </StackLayout>
                                                    <BoxView HeightRequest="2" Margin="6,10,6,6" >
                                                        <BoxView.Background>
                                                            <LinearGradientBrush EndPoint="0,1">
                                                                <GradientStop Color="#262626"
                                                  Offset="0" />
                                                                <GradientStop Color="#363636"
                                                   Offset="0.5" />
                                                                <GradientStop Color="#262626"
                                                  Offset="1.0" />
                                                            </LinearGradientBrush>
                                                        </BoxView.Background>
                                                    </BoxView>
                                                </StackLayout>

                                                <StackLayout Spacing="0">
                                                    <StackLayout Orientation="Horizontal">
                                                        <Frame IsClippedToBounds="True" CornerRadius="16" Padding="2" HeightRequest="90" WidthRequest="70" MinimumWidthRequest="70" HorizontalOptions="Start"   VerticalOptions="Start"
                           xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="4" BackgroundColor="#202020" >
                                                            <ffimageloading:CachedImage Source="Movie3"  Aspect="AspectFill"    xct:CornerRadiusEffect.CornerRadius="16" />
                                                        </Frame>
                                                        <StackLayout Spacing="0">
                                                            <Label Text="Avenger : End Game"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Subtitle}" VerticalOptions="Start" HorizontalOptions="Start" ></Label>
                                                            <Label Text="30-08-2023 14:59:30" xct:ShadowEffect.Color="#777777"  xct:ShadowEffect.Radius="1" Style="{StaticResource Size_Micro}" Opacity="0.7" ></Label>
                                                            <Label MaxLines="2" LineBreakMode="TailTruncation"  xct:ShadowEffect.Color="#ffffff"  xct:ShadowEffect.Radius="2" Text="Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris "></Label>
                                                            <StackLayout Orientation="Horizontal">
                                                                <local:StarView FillColors="#FF6400" Rating="1"  Style="{StaticResource FirstStarMargin}"/>
                                                                <Label Text="5"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3" Style="{StaticResource Size_Small}"></Label>
                                                            </StackLayout>

                                                        </StackLayout>
                                                    </StackLayout>
                                                    <BoxView HeightRequest="2" Margin="6,10,6,6" >
                                                        <BoxView.Background>
                                                            <LinearGradientBrush EndPoint="0,1">
                                                                <GradientStop Color="#262626"
                                                  Offset="0" />
                                                                <GradientStop Color="#363636"
                                                   Offset="0.5" />
                                                                <GradientStop Color="#262626"
                                                  Offset="1.0" />
                                                            </LinearGradientBrush>
                                                        </BoxView.Background>
                                                    </BoxView>
                                                </StackLayout>


                                            </StackLayout>
                                        </StackLayout>

                                    </Setter.Value>
                                </Setter>
                            </DataTrigger>
                            <DataTrigger TargetType="pancake:PancakeView" Binding="{Binding IsLogged}" Value="false">
                                <Setter Property="Content">

                                    <StackLayout Margin="16,0,16,60" HorizontalOptions="Center" VerticalOptions="Center">
                                        <!--Logo Image-->
                                        <StackLayout  Orientation="Horizontal" HorizontalOptions="Center" Spacing="0" Margin="0,0,0,16" >
                                            <ffimageloading:CachedImage Source="MiaoMovieLogo" HorizontalOptions="Center" VerticalOptions="FillAndExpand" Aspect="AspectFit" WidthRequest="100"></ffimageloading:CachedImage>
                                            <ffimageloading:CachedImage Source="MiaoMovieFont"  HorizontalOptions="Center" VerticalOptions="FillAndExpand"  Aspect="AspectFit" WidthRequest="160"></ffimageloading:CachedImage>
                                        </StackLayout>
                                        <Label Text="Sign in to enjoy more feature" Style="{StaticResource Size_Title}" HorizontalOptions="Center"  xct:ShadowEffect.Color="#ff6400"  xct:ShadowEffect.Radius="3"></Label>
                                        <Frame BackgroundColor="#ff6400" CornerRadius="50" HorizontalOptions="Center" Padding="48,16" Margin="0,32">
                                            <Label xct:ShadowEffect.Color="White" xct:ShadowEffect.Radius="3"  Text="Sign In" HorizontalOptions="Center" Style="{StaticResource Size_Medium}"></Label>
                                            <Frame.GestureRecognizers>
                                                <TapGestureRecognizer Tapped="Nav_UserLoginPage" CommandParameter="RegisterStep1"></TapGestureRecognizer>
                                            </Frame.GestureRecognizers>
                                        </Frame>
                                    </StackLayout>
                                </Setter>
                            </DataTrigger>
                        </pancake:PancakeView.Triggers>

                    </pancake:PancakeView>
                    <circle:CircleImage IsVisible="{Binding IsLogged}" BorderColor="#99262626" BorderThickness="3" VerticalOptions="Start" Margin="0,90" Source="{Binding LoggedUser.Image}" HorizontalOptions="Center" WidthRequest="150" ></circle:CircleImage>

                </Grid>

            </ScrollView>

            <!-- Header -->
            <FlexLayout x:Name="ProfileHeader" Direction="Row" JustifyContent="SpaceBetween" VerticalOptions="Start" HeightRequest="50"  Padding="16,10" >
                <Label xct:ShadowEffect.Color="#000000" Style="{StaticResource Size_Header}" Text="Me"></Label>
                <Frame Padding="8" BackgroundColor="#B3080808" CornerRadius="16" VerticalOptions="CenterAndExpand" Margin="0,4">
                    <Image Source="SettingIcon" Aspect="AspectFit" WidthRequest="35"></Image>
                    <Frame.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Nav_SettingPopup"></TapGestureRecognizer>
                    </Frame.GestureRecognizers>
                </Frame>
            </FlexLayout>


        </Grid>

        <!-- Bottom Strip-->

        <Frame  VerticalOptions="End" Padding="0" Margin=" 0,0,0,-1" BackgroundColor="Transparent" >

            <FlexLayout Padding="0" Direction="Row" JustifyContent="SpaceBetween" AlignItems="Stretch"  HeightRequest="60"  >

                <FlexLayout.Background>
                    <LinearGradientBrush EndPoint="0,1">
                        <GradientStop Color="Transparent" Offset="0" />
                        <GradientStop Color="#121212" Offset="0.15" />
                        <GradientStop Color="#080808" Offset="0.2" />
                    </LinearGradientBrush>

                </FlexLayout.Background>

                <!-- 第一个 StackLayout -->

                <StackLayout x:Name="HomeNav" Padding="10" FlexLayout.Grow="1" Background="{Binding NavHomeBackground}" >
                    <Image Source="{Binding NavHomeIcon}" Aspect="AspectFit" WidthRequest="30" VerticalOptions="CenterAndExpand" ></Image>
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Nav_BottomTrip" CommandParameter="Home"></TapGestureRecognizer>
                    </StackLayout.GestureRecognizers>
                </StackLayout>


                <!-- 第二个 StackLayout -->

                <StackLayout  Padding="10" FlexLayout.Grow="1"  Background="{Binding NavTicketBackground}">
                    <Image Source="{Binding NavTicketIcon}" Aspect="AspectFit" WidthRequest="30"  VerticalOptions="CenterAndExpand"></Image>
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer  Tapped="Nav_BottomTrip" CommandParameter="Ticket"></TapGestureRecognizer>
                    </StackLayout.GestureRecognizers>
                </StackLayout>

                <!--中间Movie Button-->

                <StackLayout Padding="10" FlexLayout.Grow="1.35"  Background="{Binding NavMovieBackground}">
                    <Image  xct:CornerRadiusEffect.CornerRadius="100" Source="{Binding NavMovieIcon}" TranslationY="-20" Aspect="AspectFit" WidthRequest="60"  VerticalOptions="CenterAndExpand">
                        <Image.Background>
                            <LinearGradientBrush EndPoint="0,1">
                                <GradientStop Color="#262626" Offset="0.3" />
                                <GradientStop Color="#080808" Offset="0.6" />
                                <GradientStop Color="Transparent" Offset="1" />
                            </LinearGradientBrush>
                        </Image.Background>

                    </Image>
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer  Tapped="Nav_BottomTrip" CommandParameter="Movie"></TapGestureRecognizer>
                    </StackLayout.GestureRecognizers>
                </StackLayout>


                <!-- 第三个 StackLayout -->

                <StackLayout Padding="10" FlexLayout.Grow="1"  Background="{Binding NavFavoriteBackground}">
                    <Image Source="{Binding NavFavoriteIcon}"  Aspect="AspectFit" WidthRequest="30"  VerticalOptions="CenterAndExpand"></Image>
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer  Tapped="Nav_BottomTrip" CommandParameter="Favorite"></TapGestureRecognizer>
                    </StackLayout.GestureRecognizers>
                </StackLayout>

                <!-- 第四个 StackLayout -->

                <StackLayout  Padding="10" FlexLayout.Grow="1"  Background="{Binding NavUserBackground}">
                    <Image Source="{Binding NavUserIcon}" Aspect="AspectFit" WidthRequest="30"  VerticalOptions="CenterAndExpand"></Image>
                    <StackLayout.GestureRecognizers>
                        <TapGestureRecognizer Tapped="Nav_BottomTrip" CommandParameter="User"></TapGestureRecognizer>
                    </StackLayout.GestureRecognizers>
                </StackLayout>

            </FlexLayout>

        </Frame>

      


    </Grid>

</ContentPage>
